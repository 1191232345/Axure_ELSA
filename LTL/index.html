<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>询价单管理系统</title>
  <!-- 引入 Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- 引入 Font Awesome 图标 -->
  <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
  
  <!-- 配置 Tailwind 自定义颜色和工具类 -->
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            primary: '#165DFF',
            success: '#27AE60',
            warning: '#F59E0B',
            danger: '#DC2626',
            neutral: {
              100: '#F3F4F6',
              200: '#E5E7EB',
              300: '#D1D5DB',
              400: '#9CA3AF',
              500: '#6B7280',
              600: '#4B5563',
              700: '#374151',
            }
          },
          fontFamily: {
            sans: ['Inter', 'system-ui', 'sans-serif'],
          },
        },
      }
    }
  </script>
  
  <!-- 内联关键CSS -->
  <style>
    .content-auto { content-visibility: auto; }
    .table-shadow { box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1); }
    .filter-item-gap { gap: 0.5rem; }
    .badge-pill { padding: 0.125rem 0.5rem; border-radius: 9999px; font-size: 0.75rem; font-weight: 500; }
  </style>
</head>

<body class="bg-gray-50 text-neutral-700">
  <!-- 筛选栏 -->
  <div class="bg-white border-b border-neutral-200 p-4">
    <div class="flex flex-wrap items-center gap-4">
      <!-- 客户代码筛选 -->
      <div class="flex items-center filter-item-gap">
        <label for="customerCode" class="text-sm font-medium text-neutral-600">客户代码</label>
        <select id="customerCode" class="border border-neutral-300 rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-primary/50 focus:border-primary">
          <option value="">请选择客户代码</option>
        </select>
      </div>
      
      <!-- 类型筛选 -->
      <div class="flex items-center filter-item-gap">
        <label for="type" class="text-sm font-medium text-neutral-600">类型</label>
        <select id="type" class="border border-neutral-300 rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-primary/50 focus:border-primary">
          <option value="">请选择类型</option>
        </select>
      </div>
      
      <!-- 状态筛选 -->
      <div class="flex items-center filter-item-gap">
        <label for="status" class="text-sm font-medium text-neutral-600">状态</label>
        <select id="status" class="border border-neutral-300 rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-primary/50 focus:border-primary">
          <option value="">请选择状态</option>
        </select>
      </div>
      
      <!-- 创建时间筛选 -->
      <div class="flex items-center gap-2">
        <label class="text-sm font-medium text-neutral-600">创建时间</label>
        <input type="date" class="border border-neutral-300 rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-primary/50 focus:border-primary">
        <span class="text-neutral-400">-</span>
        <input type="date" class="border border-neutral-300 rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-primary/50 focus:border-primary">
      </div>
      
      <!-- 搜索和重置按钮 -->
      <div class="ml-auto flex gap-2">
        <button class="px-4 py-2 border border-neutral-300 rounded-md text-sm font-medium text-neutral-700 hover:bg-neutral-100 transition-colors">
          重置
        </button>
        <button class="px-4 py-2 bg-primary text-white rounded-md text-sm font-medium hover:bg-primary/90 transition-colors">
          搜索
        </button>
      </div>
    </div>
  </div>
  
  <!-- 主内容区 -->
  <div class="p-4">
    <!-- 新增按钮 -->
    <div class="mb-4">
      <button id="add-button" class="flex items-center gap-1 px-4 py-2 bg-primary text-white rounded-md text-sm font-medium hover:bg-primary/90 transition-colors">
        <i class="fa fa-plus"></i> 新增
      </button>
    </div>
    
    <!-- 询价单表格 -->
    <div class="bg-white rounded-lg table-shadow overflow-hidden">
      <table class="w-full text-sm">
        <thead>
          <tr class="bg-neutral-100 text-neutral-600">
            <th class="px-4 py-3 text-left font-medium">询价单号</th>
            <th class="px-4 py-3 text-left font-medium">类型</th>
            <th class="px-4 py-3 text-left font-medium">客户代码</th>
            <th class="px-4 py-3 text-left font-medium">发货地</th>
            <th class="px-4 py-3 text-left font-medium">收货地</th>
            <th class="px-4 py-3 text-left font-medium">产品数量</th>
            <th class="px-4 py-3 text-left font-medium">状态</th>
            <th class="px-4 py-3 text-left font-medium">创建人</th>
            <th class="px-4 py-3 text-left font-medium">创建时间</th>
            <th class="px-4 py-3 text-left font-medium">操作</th>
          </tr>
        </thead>
        <tbody>
          <!-- 表格数据行 1 -->
          <tr class="border-t border-neutral-200 hover:bg-neutral-50 transition-colors">
            <td class="px-4 py-3">XJ-20251013-00002</td>
            <td class="px-4 py-3">FTL(小车)</td>
            <td class="px-4 py-3">DEMO</td>
            <td class="px-4 py-3 truncate max-w-[150px]">698 Pencader Dr Newark, DE 19...</td>
            <td class="px-4 py-3 truncate max-w-[150px]">698 Pencader Dr Newark, DE 19...</td>
            <td class="px-4 py-3">1</td>
            <td class="px-4 py-3"><span class="status-badge badge-pill bg-primary/10 text-primary" data-id="1">已报价</span></td>
            <td class="px-4 py-3">luohongyan</td>
            <td class="px-4 py-3">2025-10-13 11:20:24</td>
            <td class="px-4 py-3 space-x-2">
              <button class="text-primary hover:text-primary/80 detail-btn" data-id="1">详情</button>
              <button class="text-primary hover:text-primary/80 view-quotation-btn" data-id="1">查看报价</button>
            </td>
          </tr>
          
          <!-- 表格数据行 2 -->
          <tr class="border-t border-neutral-200 hover:bg-neutral-50 transition-colors">
            <td class="px-4 py-3">XJ-20251013-00001</td>
            <td class="px-4 py-3">FTL(小车)</td>
            <td class="px-4 py-3">AJQY</td>
            <td class="px-4 py-3 truncate max-w-[150px]">9189 Utica Ave, Rancho Cucam...</td>
            <td class="px-4 py-3 truncate max-w-[150px]">698 Pencader Dr Newark, DE 19...</td>
            <td class="px-4 py-3">1</td>
            <td class="px-4 py-3"><span class="status-badge badge-pill bg-primary/10 text-primary" data-id="2">已报价</span></td>
            <td class="px-4 py-3">luohongyan</td>
            <td class="px-4 py-3">2025-10-13 10:49:17</td>
            <td class="px-4 py-3 space-x-2">
              <button class="text-primary hover:text-primary/80 detail-btn" data-id="2">详情</button>
              <button class="text-primary hover:text-primary/80 view-quotation-btn" data-id="2">查看报价</button>
            </td>
          </tr>
          
          <!-- 表格数据行 3 -->
          <tr class="border-t border-neutral-200 hover:bg-neutral-50 transition-colors">
            <td class="px-4 py-3">XJ-20251011-00005</td>
            <td class="px-4 py-3">FTL(小车)</td>
            <td class="px-4 py-3">GZSY</td>
            <td class="px-4 py-3 truncate max-w-[150px]">1021 N Todd Ave, Azusa...</td>
            <td class="px-4 py-3 truncate max-w-[150px]">1021 N Todd Ave, Azusa...</td>
            <td class="px-4 py-3">1</td>
            <td class="px-4 py-3"><span class="status-badge badge-pill bg-primary/10 text-primary" data-id="3">已报价</span></td>
            <td class="px-4 py-3">luohongyan</td>
            <td class="px-4 py-3">2025-10-11 14:55:02</td>
            <td class="px-4 py-3 space-x-2">
              <button class="text-primary hover:text-primary/80 detail-btn" data-id="3">详情</button>
              <button class="text-primary hover:text-primary/80 view-quotation-btn" data-id="3">查看报价</button>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
  
  <script>
    // 「新增按钮」跳转逻辑
    document.getElementById('add-button').addEventListener('click', function() {
      window.location.href = 'add customer.html';
    });
  </script>
  


  <!-- JavaScript 交互逻辑 -->
  <script>
    // 获取DOM元素
    const detailButtons = document.querySelectorAll('.detail-btn');
    const viewQuotationButtons = document.querySelectorAll('.view-quotation-btn');
    
    // 更新询价单状态显示
      function updateInquiryStatuses() {
        const statusBadges = document.querySelectorAll('.status-badge');
        const orderedData = JSON.parse(localStorage.getItem('orderedInquiries') || '{}');
        
        statusBadges.forEach(badge => {
          const row = badge.closest('tr');
          const inquiryId = row.querySelector('td:first-child').textContent;
          
          // 检查是否存在于已下单对象中
          if (orderedData[inquiryId]) {
            // 更新为已下单状态
            badge.textContent = '已下单';
            badge.classList.remove('bg-primary/10', 'text-primary');
            badge.classList.add('bg-success/10', 'text-success');
          }
        });
      }
      
      // 页面加载时更新状态
      updateInquiryStatuses();
      
      // 监听localStorage变化，实时更新状态
      window.addEventListener('storage', function(e) {
        if (e.key === 'inquiryStatusUpdated') {
          updateInquiryStatuses();
        }
      });
      
      // 绑定详情按钮事件 - 跳转到详情页
      if (detailButtons && detailButtons.length > 0) {
      detailButtons.forEach(button => {
        if (button) {
          button.addEventListener('click', (e) => {
            const id = e.currentTarget.dataset.id;
            console.log('查看详情ID:', id);
            // 跳转到详情页，可以传递ID参数
            window.location.href = `add_details.html?id=${id}`;
          });
        }
      });
    }
    
    // 绑定查看报价按钮事件
    if (viewQuotationButtons && viewQuotationButtons.length > 0) {
      viewQuotationButtons.forEach(button => {
        if (button) {
          button.addEventListener('click', (e) => {
            const id = e.currentTarget.dataset.id;
            console.log('查看报价ID:', id);
            // 这里可以实现查看报价的逻辑，比如跳转到报价页面
            window.location.href = `details.html?id=${id}&tab=quotation`;
          });
        }
      });
    }


  </script>
</body>
</html>